---
title: "Forest Vegetation Plots QC"
author: "John Paul Schmit"
date: "5/18/2020"
output: html_document
---

```{r Plot_setup, include=F}

TotPlots<-nrow(QCPlots) #Total number of plots being checked

# 1.1.0
Plots_No_Unit<-QCPlots %>% filter(is.na(Unit_Code)) %>% select(Unit_Code, Plot_Name)

#1.2.0
Plots_Bad_Slope<-QCPlots %>% filter(Slope<0 | Slope >58 | is.na(Slope)) %>% select(Unit_Code, Plot_Name, Slope, Aspect)

#1.3.0
Plots_Bad_Aspect<-QCPlots %>% filter(Aspect<=0 | Aspect >360 | (is.na(Aspect) & !Slope %in% 0)) %>% select(Unit_Code, Plot_Name, Slope, Aspect)

#1.4.0
Plots_No_Coords<-QCPlots %>% filter(is.na(Latitude)| is.na(Longitude) | is.na(UTM_18N_NAD83_X) | is.na(UTM_18N_NAD83_Y)) %>% 
   select(Unit_Code, Plot_Name, Latitude, Longitude, UTM_18N_NAD83_X, UTM_18N_NAD83_Y)

#1.5.0
Plots_Bad_Coords<-QCPlots %>% filter(Latitude < 37.7| Latitude > 40.36|Longitude<  -79.5  | Longitude > -76.1 ) %>% 
   select(Unit_Code, Plot_Name, Latitude, Longitude)
```

#### **Plots Checked:** `r TotPlots` ####

### Unit Codes

```{r Plot_unit_Codes, echo=FALSE, hold=FALSE, results="asis"}
if(nrow(Plots_No_Unit)==0) cat("All plots have a Unit Code.<br>") else {
   cat("<span style='color:red;'> Plots with no unit code.</span><br>"); NiceTable(Plots_No_Unit)}
```

---

### Slope and Aspect


```{r slope_aspect, echo=FALSE, hold=FALSE, results="asis"}
cat("<br>**Slope**<br>")
if(nrow(Plots_Bad_Slope)==0) cat("All plots have an acceptable slope measurement.<br>") else {
   errorText("Plots with a missing slope or a slope <0 or >58"); NiceTable(Plots_Bad_Slope)}

cat("\n  **Aspect**  \n")
if(nrow(Plots_Bad_Aspect)==0) cat("All plots have an acceptable aspect measurement.  \n") else {
   errorText("Plots with a missing aspect or an aspect <1 or >360:"); NiceTable(Plots_Bad_Aspect)}
```

---

### Geographic Coordinates

```{r geo_coords, echo=FALSE, hold=FALSE, results="asis"}
cat("<br>**Coordinates Present**<br>")
if(nrow(Plots_No_Coords)==0) cat("All plots have geographic coordinates.  \n") else { 
   cat("Plots with missing coordinates:  \n"); NiceTable(Plots_No_Coords)}

cat("<br>**Bounding Box**<br>")
if(nrow(Plots_Bad_Coords)==0) cat("All plots' latitude and longitude are within the NCRN bounding box.<br>") else {
   errorText("Plots with lat/long outside bounding box:"); NiceTable(Plots_Bad_Coords)}

```
